"use strict";class StickyHeader{constructor(){let a=this;this.$tbayHeader=$(".tbay_header-template"),this.$tbayHeaderMain=$(".tbay_header-template .header-main"),this.$tbayHeader.hasClass("main-sticky-header")&&0<this.$tbayHeaderMain.length&&this._initStickyHeader(),$(".search-min-wrapper .btn-search-min").click(this._onClickSeachMin),$(".tbay-search-form .overlay-box").click(this._onClickOverLayBox),this._intSearchOffcanvas;let b=$(".element-sticky-header");0<b.length&&a._initELementStickyheader(b)}_initStickyHeader(){var a=this,b=$(window).width(),c=a.$tbayHeader.outerHeight(),d=a.$tbayHeaderMain.outerHeight(),f=0<$("#wpadminbar").length?$("#wpadminbar").outerHeight():0,g=a.$tbayHeaderMain.offset().top;if(1024<=b)if(0==g||g==f){if(a.$tbayHeader.hasClass("sticky-header"))return;a._stickyHeaderOnDesktop(d,g,f),a.$tbayHeaderMain.addClass("sticky-1"),$(window).scroll(function(){$(this).scrollTop()>c?a.$tbayHeaderMain.addClass("sticky-box"):a.$tbayHeaderMain.removeClass("sticky-box")})}else $(window).scroll(function(){if(a.$tbayHeader.hasClass("main-sticky-header"))if($(this).scrollTop()>g-f){if(a.$tbayHeader.hasClass("sticky-header"))return;a._stickyHeaderOnDesktop(d,g,f)}else a.$tbayHeaderMain.css("top",0).css("position","relative").removeClass("sticky-header").parent().css("padding-top",0),a.$tbayHeaderMain.prev().css("margin-bottom",0)})}_stickyHeaderOnDesktop(a,b,c){this.$tbayHeaderMain.addClass("sticky-header").css("top",c).css("position","fixed"),0==b||b==c?this.$tbayHeaderMain.parent().css("padding-top",a):this.$tbayHeaderMain.prev().css("margin-bottom",a)}_onClickSeachMin(){$(".tbay-search-form.tbay-search-min form").toggleClass("show"),$(this).toggleClass("active")}_onClickOverLayBox(){$(".search-min-wrapper .btn-search-min").removeClass("active"),$(".tbay-search-form.tbay-search-min form").removeClass("show")}_intSearchOffcanvas(){if(0!==$("#tbay-offcanvas-main").length){$("[data-toggle=\"offcanvas-main-search\"]").on("click",function(){$("#wrapper-container").toggleClass("show"),$("#tbay-offcanvas-main").toggleClass("show")});var a=$("#tbay-offcanvas-main, .search");$(window).on("click.Bst",function(b){0!=a.has(b.target).length||a.is(b.target)||($("#wrapper-container").removeClass("show"),$("#tbay-offcanvas-main").removeClass("show"))})}}_initELementStickyheader(a){var b=a.first();let c=this;var d=!1,f=0,g=0;if(0!==b.parents(".tbay_header-template").length){var h=0<$("#wpadminbar").length?$("#wpadminbar").outerHeight():0,i=b.offset().top-$(window).scrollTop()-h,j=i;b.prevAll().each(function(){g+=$(this).outerHeight()}),a.each(function(){0<$(this).parents(".element-sticky-header").length||(f+=$(this).outerHeight())}),c._initELementStickyheaderContent(i,j,f,g,a,b,h,d),$(window).scroll(function(){d=!0,0===$(window).scrollTop()&&(j=0),c._initELementStickyheaderContent(i,j,f,g,a,b,h,d)})}}_initELementStickyheaderContent(a,b,c,d,f,g,h,i){if($(window).scrollTop()<d&&i||0===$(window).scrollTop()&&i){if(g.parent().children().first().hasClass("element-sticky-header"))return;g.css("top",""),b===a||0===b?f.last().next().css("padding-top",""):g.prev().css("margin-bottom",""),g.parent().css("padding-top",""),f.each(function(){$(this).removeClass("sticky"),0<$(this).prev(".element-sticky-header").length&&$(this).css("top","")})}else{if($(window).scrollTop()<d&&!i)return;f.each(function(){if(!(0<$(this).parents(".element-sticky-header").length)&&($(this).addClass("sticky"),0<$(this).prevAll(".element-sticky-header").length)){let a=0;$(this).prevAll(".element-sticky-header").each(function(){a+=$(this).outerHeight()}),$(this).css("top",a+h)}}),g.css("top",h),b===a||0===b?(g.addClass("sticky"),g.parent().css("padding-top",c)):g.prev().css("margin-bottom",c)}}}const TREE_VIEW_OPTION_MEGA_MENU={animated:300,collapsed:!0,unique:!0,persist:"location"},TREE_VIEW_OPTION_MOBILE_MENU={animated:300,collapsed:!0,unique:!0,hover:!1};class Mobile{constructor(){this._topBarDevice(),this._mobileMenu(),this._SearchFocusActive(),this._SearchOnClickSearchHeader(),this._PopupLoginMobile(),this._Select_change_form(),this._FastClicker(),this._FooterMobileAccordion(),$(window).scroll(()=>{this._topBarDevice()})}_topBarDevice(){var a=$(window).scrollTop(),b=$(".topbar-device-mobile").height(),c=$(window).scrollTop();$(".topbar-device-mobile").toggleClass("active",a<=b),$("#tbay-mobile-menu").toggleClass("offsetop",0==c)}_mobileMenu(){$("[data-toggle=\"offcanvas\"], .btn-offcanvas").click(function(){$("#wrapper-container").toggleClass("active"),$("#tbay-mobile-menu").toggleClass("active")}),$("#main-mobile-menu .caret").click(function(){$("#main-mobile-menu .dropdown").removeClass("open"),$(event.target).parent().addClass("open")})}_SearchFocusActive(){let a=$(".tbay-search-mobile .tbay-search"),b=$(".tbay-search-mobile .button-search-cancel");a.focusin(function(){$(a.parents("#tbay-mobile-menu-navbar")).addClass("search-mobile-focus"),a.parent().find(".button-search-cancel").addClass("cancel-active")}),b.on("click",function(){$(b.parents("#tbay-mobile-menu-navbar")).removeClass("search-mobile-focus"),b.removeClass("cancel-active")})}_SearchOnClickSearchHeader(){let a=$(".search-device .search-icon"),b=$(".search-device .button-search-cancel");a.on("click",function(){$(a.parent()).addClass("active-search-mobile"),$(a.parents(".topbar-device-mobile")).addClass("active-search")}),b.on("click",function(){$(b.parents(".search-device")).removeClass("active-search-mobile"),$(a.parents(".topbar-device-mobile")).removeClass("active-search"),b.removeClass("cancel-active")})}_PopupLoginMobile(){let a=$(".mmenu-account .popup-login a, .footer-device-mobile > .device-account > a.popup-login");a.on("click",function(){let b=$("#tbay-mobile-menu-navbar").data("mmenu");$("#custom-login-wrapper").modal("show"),$(a.parents("#tbay-mobile-menu-navbar")).removeClass("mm-menu_opened"),b.close()})}_Select_change_form(){$(".topbar-device-mobile > form select").on("change",function(){this.form.submit()})}_FastClicker(){"addEventListener"in document&&document.addEventListener("DOMContentLoaded",function(){FastClick.attach(document.body)},!1)}_FooterMobileAccordion(){768<=$(window).width()||$(".footer-mobile-collapse .heading-tbay-title").off().on("click",function(){var a=$(this),b=a.parent(),c=b.find("> *:not(.heading-tbay-title)");b.hasClass("opened-collapse")?(b.removeClass("opened-collapse"),c.stop().slideUp(200)):(b.addClass("opened-collapse"),c.stop().slideDown(200))})}}class AccountMenu{constructor(){this._slideToggleAccountMenu(".tbay-login"),this._slideToggleAccountMenu(".topbar-mobile"),this._tbayClickNotMyAccountMenu()}_tbayClickNotMyAccountMenu(){var a=$(window),b=$(".tbay-login .dropdown .account-menu,.topbar-mobile .dropdown .account-menu,.tbay-login .dropdown .account-button,.topbar-mobile .dropdown .account-button");a.on("click.Bst",function(a){0!=b.has(a.target).length||b.is(a.target)||($(".tbay-login .dropdown .account-menu").slideUp(500),$(".topbar-mobile .dropdown .account-menu").slideUp(500))})}_slideToggleAccountMenu(a){$(a).find(".dropdown .account-button").click(function(){$(a).find(".dropdown .account-menu").slideToggle(500)})}}class BackToTop{constructor(){this._init()}_init(){$(window).scroll(function(){var a=400<$(this).scrollTop();$(".tbay-to-top").toggleClass("active",a),$(".tbay-category-fixed").toggleClass("active",a)}),$("#back-to-top-mobile, #back-to-top").click(this._onClickBackToTop)}_onClickBackToTop(){$("html, body").animate({scrollTop:"0px"},800)}}class CanvasMenu{constructor(){this._init(),this._remove_click_Outside(),this._initCanvasMenuSidebar(),this._initCanvasMenu()}_init(){$("#tbay-offcanvas-main .btn-toggle-canvas").on("click",function(){$("#wrapper-container").removeClass("active")}),$("#main-menu-offcanvas .caret").click(function(){return $("#main-menu-offcanvas .dropdown").removeClass("open"),$(this).parent().addClass("open"),!1}),$("[data-toggle=\"offcanvas-main\"]").on("click",function(){$("#wrapper-container").toggleClass("active"),$("#tbay-offcanvas-main").toggleClass("active")})}_remove_click_Outside(){let a=$(window);a.on("click.Bst,click touchstart tap",function(a){let b=$("#tbay-offcanvas-main, .btn-toggle-canvas");if(0==b.has(a.target).length&&!b.is(a.target))return void $("#wrapper-container").removeClass("active")})}_initCanvasMenuSidebar(){jQuery(document).on("click",".canvas-menu-sidebar .btn-canvas-menu",function(){$("body").toggleClass("canvas-menu-active")}),jQuery(document).on("click",".close-canvas-menu, .bg-close-canvas-menu",function(){$("body").removeClass("canvas-menu-active")})}_initCanvasMenu(){$(".element-menu-canvas").each(function(){jQuery(this).find(".canvas-menu-btn-wrapper > a").on("click",function(a){$(this).parent().parent().addClass("open"),a.stopPropagation()})}),jQuery(document).on("click",".canvas-overlay-wrapper",function(a){$(this).parent().removeClass("open"),a.stopPropagation()})}}class FuncCommon{constructor(){var a=this;a._progressAnimation(),a._createWrapStart(),$(".mod-heading .widget-title > span").wrapStart(),a._tbayActiveAdminBar(),a._tbayResizeMegamenu(),a._initHeaderCoverBG(),a._initCanvasSearch(),a._initTreeviewMenu(),a._categoryMenu(),a._initContentMinHeight(),$(window).scroll(()=>{a._tbayActiveAdminBar()}),$(window).on("resize",()=>{a._tbayResizeMegamenu()}),setTimeout(function(){jQuery(document.body).on("tbay_load_html_click",()=>{a._tbayResizeMegamenu()})},2e3),a._addAccordionLoginandCoupon()}_tbayActiveAdminBar(){var a=$("#wpadminbar");0<a.length&&$("body").addClass("active-admin-bar")}_createWrapStart(){$.fn.wrapStart=function(){return this.each(function(){var a=$(this),b=a.contents().filter(function(){return 3==this.nodeType}).first(),c=b.text().trim(),d=c.split(" ",1).join(" ");b.length&&(b[0].nodeValue=c.slice(d.length),b.before("<b>"+d+"</b>"))})}}_progressAnimation(){$("[data-progress-animation]").each(function(){var a=$(this);a.appear(function(){var b=a.attr("data-appear-animation-delay")?a.attr("data-appear-animation-delay"):1;1<b&&a.css("animation-delay",b+"ms"),setTimeout(function(){a.animate({width:a.attr("data-progress-animation")},800)},b)},{accX:0,accY:-50})})}_tbayResizeMegamenu(){var a=$("body").innerWidth();0<$(".tbay_custom_menu").length&&$(".tbay_custom_menu").hasClass("tbay-vertical-menu")&&(767<a?this._resizeMegaMenuOnDesktop():this._initTreeViewForMegaMenuOnMobile()),0<$(".tbay-megamenu").length&&$(".tbay-megamenu,.tbay-offcanvas-main").hasClass("verticle-menu")&&767<a&&this._resizeMegaMenuVertical()}_resizeMegaMenuVertical(){var a=parseInt($("#main-container.container").innerWidth()),b=parseInt($(".verticle-menu").innerWidth());$(".verticle-menu").find(".aligned-fullwidth").children(".dropdown-menu").css({"max-width":a-b,width:a-30})}_resizeMegaMenuOnDesktop(){let a=$("#main-container.container").innerWidth()-$(".tbay-vertical-menu").innerWidth(),b=$("#main-container.container").innerWidth()-30;$(".tbay-vertical-menu").find(".aligned-fullwidth").children(".dropdown-menu").css({"max-width":a,width:b})}_initTreeViewForMegaMenuOnMobile(){$(".tbay-vertical-menu > .widget_nav_menu >.nav > ul").each(function(){$(this).hasClass("treeview")||$(this).treeview(TREE_VIEW_OPTION_MEGA_MENU)})}_addAccordionLoginandCoupon(){$(".showlogin, .showcoupon").click(function(a){$(a.currentTarget).toggleClass("active")})}_initHeaderCoverBG(){let a=$(".tbay-horizontal .navbar-nav > li,.tbay-horizontal-default .navbar-nav > li, .tbay_header-template .product-recently-viewed-header"),b=$(".tbay-search-form .tbay-search"),c=$(".category-inside .category-inside-title"),d=$(".cart-popup");a.mouseenter(function(){0===$(this).parents("#tbay-header").length||0==$(this).children(".dropdown-menu, ul, .content-view").length||$(".tbay_header-template").addClass("nav-cover-active-1")}).mouseleave(function(){$(this).closest(".dropdown-menu").length||$(".tbay_header-template").removeClass("nav-cover-active-1")}),b.focusin(function(){$(this).closest(".dropdown-menu").length||0<b.parents(".sidebar-canvas-search").length||0===$(this).closest(".tbay_header-template").length||$(".tbay_header-template").addClass("nav-cover-active-2")}).focusout(function(){$(".tbay_header-template").removeClass("nav-cover-active-2")}),d.on("shown.bs.dropdown",function(a){$(a.target).closest(".tbay_header-template").addClass("nav-cover-active-3")}).on("hidden.bs.dropdown",function(a){$(a.target).closest(".tbay_header-template").removeClass("nav-cover-active-3")}),c.parents(".tbay_header-template")&&($(document.body).on("tbay_category_inside_open",()=>{$(".tbay_header-template").addClass("nav-cover-active-4")}),$(document.body).on("tbay_category_inside_close",()=>{$(".tbay_header-template").removeClass("nav-cover-active-4")}))}_initCanvasSearch(){let a=$("#tbay-search-form-canvas .sidebar-canvas-search .sidebar-content .tbay-search");a.focusin(function(){a.parent().addClass("search_cv_active")}).focusout(function(){a.parent().removeClass("search_cv_active")})}_initTreeviewMenu(){"undefined"==typeof jQuery.fn.treeview||($("#category-menu").addClass("treeview"),jQuery(".treeview-menu .menu, #category-menu").treeview(TREE_VIEW_OPTION_MEGA_MENU),jQuery("#main-mobile-menu, #main-mobile-menu-xlg").treeview(TREE_VIEW_OPTION_MOBILE_MENU))}_categoryMenu(){$(".category-inside .category-inside-title").click(function(){$(event.target).parents(".category-inside").toggleClass("open");$(event.target).parents(".category-inside").hasClass("setting-open")||($(event.target).parents(".category-inside").hasClass("open")?$(document.body).trigger("tbay_category_inside_open"):$(document.body).trigger("tbay_category_inside_close"))});let a=$(window);a.on("click.Bst,click touchstart tap",function(a){let b=$(".category-inside .category-inside-title, .category-inside-content");if(($(".category-inside").hasClass("open")||$(".tbay_header-template").hasClass("nav-cover-active-4"))&&0==b.has(a.target).length&&!b.is(a.target)){let a=$(".category-inside");$.each(a,function(a,b){$(b).hasClass("setting-open")||($(b).removeClass("open"),$(".tbay_header-template").removeClass("nav-cover-active-4"))})}})}_initContentMinHeight(){let a=$("body").innerWidth(),b=$(window).height(),c=$(".tbay_header-template").outerHeight(),d=$("#tbay-main-content").outerHeight();d<b&&1200<a&&$("#tbay-main-content").css("min-height",b-c)}}class NewsLetter{constructor(){this._init()}_init(){var a=$("#popupNewsletterModal");0===a.length||(a.on("hidden.bs.modal",function(){Cookies.set("hiddenmodal",1,{expires:.1,path:"/"})}),setTimeout(function(){("undefined"==typeof Cookies.get("hiddenmodal")||""==Cookies.get("hiddenmodal"))&&a.modal("show")},3e3))}}class Banner{constructor(){this._init()}_init(){let a=$(".banner-remove");0===a.length?$(".elementor-widget-besa-banner-close").each(function(){$(this).closest("section").addClass("section-banner-close")}):a.on("click",function(a){let b=$(this).data("id");$(this).parents(".elementor-widget-besa-banner-close").slideUp("slow"),Cookies.set("banner_remove_"+b,"hidden",{expires:.1,path:"/"}),a.preventDefault()})}}class Search{constructor(){this._init()}_init(){this._tbaySearchMobile(),this._searchToTop(),this._searchCanvasForm(),this._searchCanvasFormV3(),$(".button-show-search").click(()=>$(".tbay-search-form").addClass("active")),$(".button-hidden-search").click(()=>$(".tbay-search-form").removeClass("active"))}_tbaySearchMobile(){$(".topbar-mobile .search-popup, .search-device-mobile").each(function(){$(this).find(".show-search").click(a=>{$(this).find(".tbay-search-form").slideToggle(500),$(this).find(".tbay-search-form .input-group .tbay-search").focus(),$(a.currentTarget).toggleClass("active")})}),$(window).on("click.Bst,click touchstart tap",function(a){var b=$(".footer-device-mobile > div i, .topbar-device-mobile .search-device-mobile i ,.search-device-mobile .tbay-search-form form");$(".search-device-mobile .show-search").hasClass("active")&&(0!=b.has(a.target).length||b.is(a.target)||($(".search-device-mobile .tbay-search-form").slideUp(500),$(".search-device-mobile .show-search").removeClass("active"),$("body").removeClass("mobile-search-active")))}),$(".topbar-mobile .dropdown-menu").click(function(a){a.stopPropagation()})}_searchToTop(){$(".search-totop-wrapper .btn-search-totop").click(function(){$(".search-totop-content").toggleClass("active"),$(this).toggleClass("active")});var a=$(".search-totop-wrapper .btn-search-totop, .search-totop-content");$(window).on("click.Bst",function(b){0!=a.has(b.target).length||a.is(b.target)||($(".search-totop-wrapper .btn-search-totop").removeClass("active"),$(".search-totop-content").removeClass("active"))})}_searchCanvasForm(){let a=$("#tbay-search-form-canvas");if(0===a.length)return;a.find("button.search-open").click(function(){$(event.target).parents("#tbay-search-form-canvas").toggleClass("open"),$("body").toggleClass("active-search-canvas")});let b=$(window),c=$("#tbay-search-form-canvas .search-open, #tbay-search-form-canvas .sidebar-content");b.on("click.Bst",function(b){a.hasClass("open")&&(0!=c.has(b.target).length||c.is(b.target)||(a.removeClass("open"),$("body").removeClass("active-search-canvas")))}),a.find("button.btn-search-close").click(function(){a.hasClass("open")&&(a.removeClass("open"),$("body").removeClass("active-search-canvas"))})}_searchCanvasFormV3(){let a=$("#tbay-search-form-canvas-v3");if(0===a.length)return;a.find("button.search-open").click(function(){$(event.target).parents("#tbay-search-form-canvas-v3").toggleClass("open"),$("body").toggleClass("active-search-canvas")});let b=$(window),c=$("#tbay-search-form-canvas-v3 .search-open, #tbay-search-form-canvas-v3 .sidebar-content");b.on("click.Bst",function(b){a.hasClass("open")&&(0!=c.has(b.target).length||c.is(b.target)||(a.removeClass("open"),$("body").removeClass("active-search-canvas")))}),a.find("button.btn-search-close").click(function(){a.hasClass("open")&&(a.removeClass("open"),$("body").removeClass("active-search-canvas"))})}}class TreeView{constructor(){this._tbayTreeViewMenu()}_tbayTreeViewMenu(){"undefined"==typeof $.fn.treeview||"undefined"==typeof $(".tbay-treeview")||$(".tbay-treeview").each(function(){$(this).find("> ul").hasClass("treeview")||$(this).find("> ul").treeview({animated:400,collapsed:!0,unique:!0,persist:"location"})})}}class Section{constructor(){this._tbayMegaMenu(),this._tbayRecentlyView()}_tbayMegaMenu(){let a=$(".elementor-widget-besa-nav-menu");0===a.length||a.find(".tbay-element-nav-menu").each(function(){"horizontal"!==$(this).data("wrapper").layout||(!$(this).closest(".elementor-top-column").hasClass("tbay-column-static")&&$(this).closest(".elementor-top-column").addClass("tbay-column-static"),!$(this).closest("section").hasClass("tbay-section-static")&&$(this).closest("section").addClass("tbay-section-static"))})}_tbayRecentlyView(){let a=$(".tbay-element-product-recently-viewed");0===a.length||a.each(function(){"header"!==$(this).data("wrapper").layout||(!$(this).closest(".elementor-top-column").hasClass("tbay-column-static")&&$(this).closest(".elementor-top-column").addClass("tbay-column-static"),!$(this).closest(".elementor-top-column").hasClass("tbay-column-recentlyviewed")&&$(this).closest(".elementor-top-column").addClass("tbay-column-recentlyviewed"),!$(this).closest("section").hasClass("tbay-section-recentlyviewed")&&$(this).closest("section").addClass("tbay-section-recentlyviewed"),!$(this).closest("section").hasClass("tbay-section-static")&&$(this).closest("section").addClass("tbay-section-static"))})}}class Preload{constructor(){this._init()}_init(){if($.fn.jpreLoader){var a=$(".js-preloader");a.jpreLoader({},function(){a.addClass("preloader-done"),$("body").trigger("preloader-done"),$(window).trigger("resize")})}$(".tbay-page-loader").delay(100).fadeOut(400,function(){$("body").removeClass("tbay-body-loading"),$(this).remove()}),$(document.body).hasClass("tbay-body-loader")&&setTimeout(function(){$(document.body).removeClass("tbay-body-loader"),$(".tbay-page-loader").fadeOut(250)},300)}}class Accordion{constructor(){this._init()}_init(){0===$(".single-product").length||$("#accordion").on("shown.bs.collapse",function(){var a=$(this).find(".collapse.show").prev(".tabs-title");a&&$("html,body").animate({scrollTop:$(a).offset().top-150},500)})}}class MenuDropdownsAJAX{constructor(){this._initmenuDropdownsAJAX()}_initmenuDropdownsAJAX(){var a=this;$("body").on("mousemove",function(){$(".menu").has(".dropdown-load-ajax").each(function(){var b=$(this);b.hasClass("dropdowns-loading")||b.hasClass("dropdowns-loaded")||!a.isNear(b,50,event)||a.loadDropdowns(b)})})}loadDropdowns(a){var b=this;a.addClass("dropdowns-loading");var c="",d="",f="";"tbay-mobile-menu-navbar"===a.closest("nav").attr("id")?(0<$("#main-mobile-menu-mmenu-wrapper").length&&(f+="_"+$("#main-mobile-menu-mmenu-wrapper").data("id")),0<$("#main-mobile-second-mmenu-wrapper").length&&(f+="_"+$("#main-mobile-second-mmenu-wrapper").data("id")),c=besa_settings.storage_key+"_megamenu_mobile"+f):c=besa_settings.storage_key+"_megamenu_"+a.closest("nav").find("ul").data("id"),d=localStorage.getItem(c);var g=!1,h=a.find(".dropdown-load-ajax"),i=[];h.each(function(){i.push($(this).find(".dropdown-html-placeholder").data("id"))});try{g=JSON.parse(d)}catch(a){console.log("cant parse Json",a)}g?(b.renderResults(g,a),"tbay-mobile-menu-navbar"!==a.attr("id")&&a.removeClass("dropdowns-loading").addClass("dropdowns-loaded")):$.ajax({url:besa_settings.ajaxurl,data:{action:"besa_load_html_dropdowns",ids:i},dataType:"json",method:"POST",success:function(d){"success"===d.status?(b.renderResults(d.data,a),localStorage.setItem(c,JSON.stringify(d.data))):console.log("loading html dropdowns returns wrong data - ",d.message)},error:function(){console.log("loading html dropdowns ajax error")}})}renderResults(a,b){var c=this;Object.keys(a).forEach(function(d){c.removeDuplicatedStylesFromHTML(a[d],function(a){let c=a;const f="<li[^>]*><a[^>]*href=[\"]"+window.location.href+"[\"]>.*?</a></li>";let g=a.match(f);if(null!==g){let a=g[0],b=a.match(/(?:class)=(?:["']\W+\s*(?:\w+)\()?["']([^'"]+)['"]/g)[0].split("\"")[1],d=a.replace(b,b+" active");c=c.replace(a,d)}b.find("[data-id=\""+d+"\"]").replaceWith(c),"tbay-mobile-menu-navbar"!==b.attr("id")&&(b.addClass("dropdowns-loaded"),setTimeout(function(){b.removeClass("dropdowns-loading")},1e3))})})}isNear(a,b,c){var d=a.offset().left-b,f=a.offset().top-b,g=d+a.width()+2*b,h=f+a.height()+2*b,i=c.pageX,j=c.pageY;return i>d&&i<g&&j>f&&j<h}removeDuplicatedStylesFromHTML(a,b){if(besa_settings.combined_css)return void b(a);else{let c=a.replace(/<style>.*?<\/style>/mg,"");return void b(c)}}}class MenuClickAJAX{constructor(){"undefined"==typeof besa_settings||this._initmenuClickAJAX()}_initmenuClickAJAX(){$(".element-menu-ajax.ajax-active").each(function(){var a=$(this);a.find(".menu-click").off("click").on("click",function(a){a.preventDefault();var b=$(this);if(b.closest(".element-menu-ajax").hasClass("ajax-active")){var c=b.closest(".tbay-element"),d=c.data("wrapper").type_menu,f=c.data("wrapper").layout;if("toggle"===d)var g=c.find(".category-inside-content > nav");else var g=c.find(".menu-canvas-content > nav");var h=g.data("id"),i=besa_settings.storage_key+"_"+h+"_"+f,j=!1,k=localStorage.getItem(i);try{j=JSON.parse(k)}catch(a){console.log("cant parse Json",a)}j?(g.html(j),c.removeClass("load-ajax"),b.closest(".element-menu-ajax").removeClass("ajax-active"),"treeview"===f?$(document.body).trigger("tbay_load_html_click_treeview"):$(document.body).trigger("tbay_load_html_click")):$.ajax({url:besa_settings.ajaxurl,data:{action:"besa_load_html_click",slug:h,type_menu:d,layout:f},dataType:"json",method:"POST",beforeSend:function(){c.addClass("load-ajax")},success:function(a){"success"===a.status?(g.html(a.data),localStorage.setItem(i,JSON.stringify(a.data)),"treeview"===f?$(document.body).trigger("tbay_load_html_click_treeview"):$(document.body).trigger("tbay_load_html_click")):console.log("loading html dropdowns returns wrong data - ",a.message),c.removeClass("load-ajax"),b.closest(".element-menu-ajax").removeClass("ajax-active")},error:function(){console.log("loading html dropdowns ajax error")}})}})})}}class SumoSelect{constructor(){"undefined"==typeof jQuery.fn.SumoSelect||"undefined"==typeof besa_settings||this._init()}_init(){jQuery(document).ready(function(){jQuery(".woocommerce-currency-switcher,.woocommerce-fillter >.select, .woocommerce-ordering > .orderby, .tbay-filter select").SumoSelect({csvDispCount:3,captionFormatAllSelected:"Yeah, OK, so everything."});let a=jQuery(".tbay-search-form");a.each(function(){$(this).hasClass("tbay-search-mobile")||$(this).find("select").SumoSelect({forceCustomRendering:!0})})})}}class AutoComplete{constructor(){"undefined"==typeof jQuery.Autocomplete||"undefined"==typeof besa_settings||this._callAjaxSearch()}_callAjaxSearch(){var a=this,b=besa_settings.ajaxurl+"?action=besa_autocomplete_search",c=$("form.searchform.besa-ajax-search"),d=function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")};c.each(function(){var f=$(this),g=f.find("input[name=s]"),h=!!f.data("thumbnail"),i=!!f.data("price");g.devbridgeAutocomplete({serviceUrl:a._AutoServiceUrl(g,b),minChars:a._AutoMinChars(g),appendTo:a._AutoAppendTo(g),width:"100%",maxHeight:"initial",onSelect:function(a){0<a.link.length&&(window.location.href=a.link)},onSearchStart:function(){let a=g.parents("form");a.addClass("tbay-loading")},beforeRender:function(a,b){"undefined"!=typeof b[0].result&&$(a).prepend("<div class=\"list-header\"><span>"+b[0].result+"</span></div>"),b[0].view_all&&$(a).append("<div class=\"view-all-products\"><span>"+besa_settings.show_all_text+"</span><i class=\"tb-icon tb-icon-chevron-right\"></i></div>")},onSearchComplete:function(){c.removeClass("tbay-loading"),$(this).parents("form").addClass("open"),$(document.body).trigger("tbay_searchcomplete")},formatResult:(b,c)=>{let f=a._initformatResult(b,c,d,h,i);return f},onHide:function(){$(this).parents("form").hasClass("open")&&$(this).parents("form").removeClass("open")}}),$("body").click(function(){g.is(":focus")||g.each(function(){$(this).devbridgeAutocomplete("hide")})})});var f=c.find("[name=\"product_cat\"], [name=\"category\"]");f.length&&f.change(function(c){let d=$(c.target).parents("form").find("input[name=s]"),f=d.devbridgeAutocomplete();f.hide(),f.setOptions({serviceUrl:a._AutoServiceUrl(d,b)}),f.onValueChange()}),$(document.body).on("tbay_searchcomplete",function(){$(".view-all-products").on("click",function(){$(this).parents("form").submit(),e.stopPropagation()})})}_AutoServiceUrl(a,b){let c=a.parents("form"),d=parseInt(c.data("count")),f=c.data("post-type"),g=c.find("[name=\"product_cat\"], [name=\"category\"]").val();return 0<d&&(b+="&number="+d),b+="&post_type="+f,g&&(b+="&product_cat="+g),b}_AutoAppendTo(a){let b=a.parents("form"),c="undefined"==typeof b.data("appendto")?b.find(".besa-search-results"):b.data("appendto");return c}_AutoMinChars(a){let b=a.parents("form"),c=parseInt(b.data("minchars"));return c}_initformatResult(a,b,c,d,f){"&"==b&&(b="&#038;");var g="("+c(b)+")",h="";return a.no_found?"<div class=\"suggestion-title no-found-msg\">"+a.value+"</div>":(d&&a.image&&0<a.image.length&&(h+=" <div class=\"suggestion-thumb\">"+a.image+"</div>"),h+="<div class=\"suggestion-group\">",h+="<div class=\"suggestion-title product-title\">"+a.value.replace(new RegExp(g,"gi"),"<strong>$1</strong>").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/&lt;(\/?strong)&gt;/g,"<$1>")+"</div>",f&&a.price&&0<a.price.length&&(h+=" <div class=\"suggestion-price price\">"+a.price+"</div>"),a.sku&&0<a.sku.length&&(h+="<div class=\"suggestion-sku product-sku\"><span>"+a.sku.replace(new RegExp(g,"gi"),"<strong>$1</strong>").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/&lt;(\/?strong)&gt;/g,"<$1>")+"</span></div>"),h+="</div>",h)}}class CountDownTimer{constructor(){"undefined"==typeof jQuery.fn.tbayCountDown||"undefined"==typeof besa_settings||(this.CountDownTimer(),this.CountDownTimer2())}CountDownTimer(){var a=this;0===jQuery("[data-time=\"timmer\"]").length||(jQuery("[data-time=\"timmer\"]:not(.scroll-init)").each(function(){a._initCountDownTimer(jQuery(this))}),jQuery("[data-time=\"timmer\"].scroll-init").waypoint(function(){var b=$($(this)[0].element);a._initCountDownTimer(b)},{offset:"100%"}))}CountDownTimer2(){var a=this;0===jQuery("[data-countdown=\"countdown\"]").length||(jQuery("[data-countdown=\"countdown\"]:not(.scroll-init)").each(function(){a._initCountDownTimer2(jQuery(this))}),jQuery("[data-countdown=\"countdown\"].scroll-init").waypoint(function(){var b=$($(this)[0].element);a._initCountDownTimer2(b)},{offset:"100%"}))}_initCountDownTimer(a){let b=jQuery(a).data("date").split("-"),c=jQuery(a).data("days")?jQuery(a).data("days"):"",d=jQuery(a).data("hours")?jQuery(a).data("hours"):"",f=jQuery(a).data("mins")?jQuery(a).data("mins"):"",g=jQuery(a).data("secs")?jQuery(a).data("secs"):"";jQuery(a).tbayCountDown({TargetDate:b[0]+"/"+b[1]+"/"+b[2]+" "+b[3]+":"+b[4]+":"+b[5],DisplayFormat:"<div class=\"times\"><div class=\"day\">%%D%%"+c+"</div><span>:</span><div class=\"hours\">%%H%%"+d+"</div><span>:</span><div class=\"minutes\">%%M%%"+f+"</div><span>:</span><div class=\"seconds\">%%S%%"+g+"</div></div>",FinishMessage:""})}_initCountDownTimer2(a){let b=jQuery(a).data("date").split("-"),c=jQuery(a).data("days")?jQuery(a).data("days"):"",d=jQuery(a).data("hours")?jQuery(a).data("hours"):"",f=jQuery(a).data("mins")?jQuery(a).data("mins"):"",g=jQuery(a).data("secs")?jQuery(a).data("secs"):"";jQuery(a).tbayCountDown({TargetDate:b[0]+"/"+b[1]+"/"+b[2]+" "+b[3]+":"+b[4]+":"+b[5],DisplayFormat:"<div class=\"times\"><div class=\"day\">%%D%%"+c+" </div><span>:</span><div class=\"hours\">%%H%%"+d+" </div><span>:</span><div class=\"minutes\">%%M%%"+f+" </div><span>:</span><div class=\"seconds\">%%S%%"+g+" </div></div>",FinishMessage:""})}}class MMenu{constructor(){"undefined"==typeof jQuery.fn.mmenu||"undefined"==typeof besa_settings||this._initMmenu()}_initMmenu(){$("body").hasClass("admin-bar")&&$("html").addClass("html-mmenu");var a="undefined"==typeof besa_settings?"":besa_settings.cancel;$["mmenu"].i18n({cancel:a});var b=$("#tbay-mobile-smartmenu");if(0!==$(b).length){var c=b.data("themes"),d=!!b.data("enablesearch"),f=b.data("title"),g=!!b.data("counters"),h=!!b.data("enabletabs"),i=h?b.data("tabone"):"",j=h?b.data("taboneicon"):"",k=h?b.data("tabsecond"):"",l=h?b.data("tabsecondicon"):"",m=!!b.data("enablesocial"),n="",o=!!b.data("enablebottom"),p=!!b.data("enableeffects"),q=p?b.data("effectspanels"):"",r=p?b.data("effectslistitems"):"",s={offCanvas:!0,navbar:{title:f},counters:g,extensions:[c,q,r]},t={navbars:[],searchfield:{}};d&&(t.navbars.push({position:["top"],content:["searchfield"]}),t.searchfield={panel:{add:!0}}),h&&t.navbars.push({type:"tabs",content:["<a href=\"#main-mobile-menu-mmenu\"><i class=\""+j+"\"></i> <span>"+i+"</span></a>","<a href=\"#mobile-menu-second-mmenu\"><i class=\""+l+"\"></i> <span>"+k+"</span></a>"]});var u="";m&&"undefined"!=typeof b.data("socialjsons")&&(n=JSON.parse(b.data("socialjsons").replace(/'/g,"\"")),u=$.map(n,function(a){return`<a class="mmenu-icon" href="${a.url}" target="_blank"><i class="${a.icon}"></i></a>`})),o&&t.navbars.push({position:"bottom",content:u}),s=_.extend(t,s);$("#tbay-mobile-menu-navbar").mmenu(s,{offCanvas:{pageSelector:"#tbay-main-content"},searchfield:{clear:!0}});let a=$("#mm-searchfield");0<a.length&&a.prependTo($("#tbay-mobile-menu-navbar .mm-navbars_bottom")),m||$(".mm-navbars_bottom .mm-navbar").hide(),$(".mm-panels").css("top",$(".mm-navbars_top").outerHeight())}}}class OnePageNav{constructor(){"undefined"==typeof jQuery.fn.onePageNav||"undefined"==typeof besa_settings||this._productSingleOnepagenav()}_productSingleOnepagenav(){if(0<$("#sticky-menu-bar").length){let a=0;0<$("#wpadminbar").length&&(a=$("#wpadminbar").outerHeight());let b=$("#sticky-menu-bar").outerHeight()+a;$("#sticky-menu-bar").onePageNav({currentClass:"current",changeHash:!1,scrollSpeed:750,scrollThreshold:.5,scrollOffset:b,filter:"",easing:"swing",begin:function(){},end:function(){},scrollChange:function(){}})}var a=$("#sticky-menu-bar");if(0<a.length){var b=$(window).width();$(".tbay_header-template").removeClass("main-sticky-header");var c=0<$(".single_add_to_cart_button").length?$(".single_add_to_cart_button").offset().top:0,d=0<$("div.product .out-of-stock").length?$("div.product .out-of-stock").offset().top:0,f=0;0<$(".by-vendor-name-link").length?d=$(".by-vendor-name-link").offset().top:0===$(".single_add_to_cart_button").length&&(f=0<a.parent().find(".product_meta").length?a.parent().find(".product_meta").offset().top-a.parent().find(".product_meta").outerHeight():0,a.hasClass("woo-simple-auction")?d=0<$(".auction_form").length?$(".auction_form").offset().top:f:a.hasClass("yith-auctions")&&(d=0<$("#yith-wcact-form-bid").length?$("#yith-wcact-form-bid").offset().top:f));var g=0<$(".single_add_to_cart_button").length?c:d;this._checkScroll(b,g,a),$(window).scroll(()=>{this._checkScroll(b,g,a)})}a.hasClass("active")&&0<jQuery("#wpadminbar").length&&a.css("top",$("#wpadminbar").height())}_checkScroll(a,b,c){if(768<=a){var d=$(window).scrollTop();d>b?(c.addClass("active"),0<jQuery("#wpadminbar").length&&c.css("top",$("#wpadminbar").height())):c.removeClass("active")}else c.removeClass("active")}}window.$=window.jQuery,jQuery(document).ready(()=>{new MenuDropdownsAJAX,new MenuClickAJAX,new StickyHeader,new AccountMenu,new BackToTop,new CanvasMenu,new FuncCommon,new NewsLetter,new Banner,new Preload,new Search,new TreeView,new Accordion,new AutoComplete,new MMenu,new OnePageNav,new CountDownTimer,new Section,(jQuery.browser.mobile||1025>$(window).width())&&new Mobile,new SumoSelect,jQuery(document).on("woof_ajax_done",function(){new SumoSelect})}),setTimeout(function(){jQuery(document.body).on("tbay_load_html_click_treeview",()=>{new TreeView})},2e3),jQuery(window).on("resize",function(){(jQuery.browser.mobile||1025>$(window).width())&&new Mobile});var CanvasMenuHandler=function(){var a=new CanvasMenu;a._initCanvasMenu()};jQuery(window).on("elementor/frontend/init",function(){elementorFrontend.isEditMode()&&elementorFrontend.hooks.addFilter("frontend/element_ready/besa-nav-menu.default",CanvasMenuHandler)});var AutoCompleteHandler=function(){new AutoComplete};jQuery(window).on("elementor/frontend/init",function(){elementorFrontend.isEditMode()&&elementorFrontend.hooks.addAction("frontend/element_ready/besa-search-form.default",AutoCompleteHandler)});var CountDownTimerHandler=function(){new CountDownTimer};setTimeout(function(){jQuery(document.body).on("tbay_quick_view",()=>{new CountDownTimer})},2e3),jQuery(window).on("elementor/frontend/init",function(){"undefined"!=typeof besa_settings&&elementorFrontend.isEditMode()&&Array.isArray(besa_settings.elements_ready.countdowntimer)&&jQuery.each(besa_settings.elements_ready.countdowntimer,function(a,b){elementorFrontend.hooks.addAction("frontend/element_ready/tbay-"+b+".default",CountDownTimerHandler)})});
